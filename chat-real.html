<html>
<head>
    <title>Chat</title>
    <style type="text/css">
        #chiselchat {
            font-family: sans-serif;
            font-size: 12px;
            z-index: 1000000;
        }
        #chiselchat .cc_tabs {
            position: fixed;
            bottom: 0px;
            right: 0px;
            width: 100%;
            height: 20px;
            border: 0;
        }
        #chiselchat .cc_tab {
            width: 120px;
            background-color: #ccc;
            color: #000;
            margin-right: 5px;
            padding: 3px;
            float: right;
            border: 1px solid #aaa;
            height: 20px;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }
        #chiselchat .cc_tab:hover {
            background-color: #ddd;
        }
        #chiselchat .cc_tab#cc_power {
            display: inline-block;
            margin: 0;
            width: 10px;
        }
        #chiselchat .cc_tab#cc_presence {
            margin: 0;
        }
        #chiselchat .cc_tab .cc_new_count {
            background-color: #eee;
            color: #000;
            font-size: 80%;
            font-weight: bold;
            display: inline-block;
            padding: 1px;
            position: absolute;
            right: 3px;
            top: 3px;
        }
        #chiselchat .cc_tab.cc_open {
            background-color: #333;
            color: #ccc;
            font-weight: bold;
            border: 1px solid #333;
        }
        #chiselchat .cc_tab.cc_open .cc_new_count {
            display: none;
        }
        #chiselchat .cc_channels {
        }
        #chiselchat .cc_channels .cc_title {
            color: #fff;
            background-color: #555;
            margin: 0;
            padding: 5px;
            height: 13px;
            font-weight: bold;
            z-index: 1000001;
            overflow: hidden;
        }
        #chiselchat .cc_channel {
            position: fixed;
            bottom: 25px;
            right: 150px;
            background-color: #333;
            width: 50%;
            height: 50%;
            display: none;
            display: scroll;
        }
        #chiselchat .cc_channel.cc_open {
            display: block;
        }
        #chiselchat .cc_channel .cc_history {
            overflow: scroll;
            z-index: 1000000;
            width: 100%;
            overflow: scroll;
        }
        #chiselchat .cc_channel .cc_history .cc_post {
            margin: 5px;
            margin-top: 15px;
            padding: 0px;
            color: #fff;
        }
        #chiselchat .cc_channel .cc_history .cc_avatar {
            margin-right: 5px;
            width: 25px;
            height: 25px;
            float: left;
        }
        #chiselchat .cc_channel .cc_history .cc_avatar img {
            height: 100%;
            width: 100%;
            background-color: #aaa;
        }
        #chiselchat .cc_channel .cc_history .cc_user {
            font-size: 90%;
            font-weight: bold;
        }
        #chiselchat .cc_channel .cc_history .cc_timestamp {
            color: #aaa;
            font-size: 80%;
            display: inline;
        }
        #chiselchat .cc_channel .cc_history .cc_controls {
            display: inline;
        }
        #chiselchat .cc_channel .cc_history .cc_controls a {
            font-size: 80%;
            padding: 1px;
            color: #aaa;   
            margin-left: 10px;
        }
        #chiselchat .cc_channel .cc_history .cc_message {
            margin-top: 3px;
            margin-left: 30px;
        }
        #chiselchat .cc_channel .cc_history .cc_me_message {
            text-align: center;
            font-style: italic;
            color: #aaa;
        }
        #chiselchat .cc_admin {
            font-weight: bold;
            color: orange;
        }
        #chiselchat .cc_channel .cc_say {
            z-index: 100000001;
            width: 100%;
            height: 20px;
        }
        #chiselchat .cc_channel .cc_say input {
            color: #000;
            border: 5px solid #333;
            background-color: #fff;
            width: 100%;
            padding: 1px;
            height: 25px;
            font-size: 110%;
        }
        #chiselchat #cc_presence_list {
            position: fixed;
            bottom: 25px;
            right: 5px;
            background-color: #333;
            color: #fff;
            width: 140px;
            height: 50%;
            display: none;
            overflow: hidden;
        }
        #chiselchat #cc_presence_list.cc_open {
            display: block;
        }
        #chiselchat #cc_presence_list .cc_chatter {
            white-space: nowrap;
            overflow: hidden;
        }
        #chiselchat #cc_presence_list .cc_chatter img {
            height: 20px; 
            width: 20px; 
            background-color: #aaa;
            margin: 3px;
            vertical-align: middle;
        }
        #chiselchat #cc_presence_list #cc_chatters {
            overflow-y: scroll;
            overflow-x: hidden;
            height: 100%;
        }
        @media (max-width: 767px) {
            #chiselchat #cc_presence_list.cc_open, #chiselchat .cc_tab#cc_presence {
                display: none;
            }
            #chiselchat .cc_channel.cc_open {
                width: 90%;
                right: 5px;
                height: 70%;
            }
        }
    </style>
</head>
<body>
    <div id="hi">priviet</div>
    <div id="chiselchat" ng-app="chiselApp" ng-controller="chiselCtrl">
        <div class="cc_tabs">
            <div class="cc_tab" id="cc_power">Î˜</div>
            <div class="cc_tab cc_open" id="383378103-09392-tab">General Chat   <div class="cc_new_count">12</div></div>
        </div>
        <div class="cc_channels">
            <div class="cc_channel cc_open" id="383378103-09392-channel">
                <div class="cc_title">
                    General Chat
                </div>
                <div class="cc_history">
                    <table>
                        <div ng-repeat="message in messages[0].messages" class="cc_post" id="{{message.id}}">
                            <div class="cc_avatar"><img src="{{message.avatarUri}}"></div>
                            <div class="cc_user">{{message.userName}}</div>
                            <div class="cc_timestamp">{{message.dateStamp}}</div>
                            <div class="cc_message">{{message.message}}</div>
                        </div>
                    </table>
                </div>
                <div class="cc_say">
                    <input type="text" placeholder="message...">
                </div>
            </div>
        </div>
    </div>

    <script src="lib/jquery-1.10.2.min.js"></script>
    <script src="lib/angular-1.2.13.min.js"></script>
    <script src='https://cdn.firebase.com/js/client/1.0.17/firebase.js'></script>
    <script src='https://cdn.firebase.com/libs/angularfire/0.7.1/angularfire.min.js'></script>
    <script src="lib/chiselapp.js"></script>
    <script>
        //Configuration object
        var ChiselChat = {};
        [% IF chat_user %]
        //User config, if missing then you're a guest
        ChiselChat.user = {
            "userId" : [% chat_user.id %],
            "profileUri" : [% chat_user.profile_uri %],
            "name" : [% chat_user.name %],
            "avatarUri" : [% chat_user.avatar_uri %],
            "isModerator" : [% chat_user.is_admin %],
        };
        [% ENDIF %]
        //Chat config, for other stuff
        ChiselChat.chat = {
            "firebaseUri" : "[% firebase_uri %]",
            "authToken" : "[% firebase_authToken %]",
        };
    </script>
    <script src="lib/chiselapp.js"></script>
<script>
    var resizeHistory = function() {
        var h = $('#chiselchat .cc_channel').height() - $('#chiselchat .cc_title').height() - $('#chiselchat .cc_say').height() - 20;
        $('#chiselchat .cc_history').height(h);
    };
    $(document).ready(resizeHistory);
    $(window).resize(resizeHistory);
</script>
</body>
</html>
